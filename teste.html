<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Meu jogo Phaser</title>
        <script src="//cdn.jsdelivr.net/npm/phaser@3.11.0/dist/phaser.js"></script>
    </head>
    <body>
        <script>
      // Definir a configuração do jogo
            var config = {
                type: Phaser.AUTO,
                width: 800,
                height: 600,
                scene: {
                    preload: preload,
                    create: create
                }
            };

            var game = new Phaser.Game(config);

            var deck = {}
            var coin = 20; 
            var aposta = 20; 
            var maoValue = 0; 
            var pick = [];
            var ci3; 
            var ci4; 
            var ci5; 
            var ci6; 
            var handvaluetext; 
            var valorApostTextIG; 
            var endgame = 0; 
            var bothand = 0; 
            var cardImage1; 
            var cardImage2; 
            var hitb;
            var done;
            var cardImage3; 
            var cardImage4; 
            var bothandvalue = 0; 
            var ci7;
            var ci8;
            var ci9;
            var acontecimentoText; 
            var tempsize = 0; 
            var c = 0
            var estado = 0
            var evento = 0 

            function preload() {
                this.load.image('fundo', 'assets/blackjack-casino-game-logo-green-background-surrounded-gold-coins-chips-cards-blackjack-logo-green-background-189625859.jpg');
                this.load.image('botao', 'assets/Screenshot_18.png');
                this.load.image('fundo2', 'assets/casino-background-green-texture-chips-50970050.jpg');
                this.load.image('bet', 'assets/logo_bet_2.png');
                this.load.image('bx', 'assets/Screenshot_19.png');
                this.load.image('1', 'assets/PNGcards/2_of_clubs.png');
                this.load.image('2', 'assets/PNGcards/2_of_diamonds.png');
                this.load.image('3', 'assets/PNGcards/2_of_hearts.png');
                this.load.image('4', 'assets/PNGcards/2_of_spades.png');
                this.load.image('5', 'assets/PNGcards/3_of_clubs.png');
                this.load.image('6', 'assets/PNGcards/3_of_diamonds.png');
                this.load.image('7', 'assets/PNGcards/3_of_hearts.png');
                this.load.image('8', 'assets/PNGcards/3_of_spades.png');
                this.load.image('9', 'assets/PNGcards/4_of_clubs.png');
                this.load.image('10', 'assets/PNGcards/4_of_diamonds.png');
                this.load.image('11', 'assets/PNGcards/4_of_hearts.png');
                this.load.image('12', 'assets/PNGcards/4_of_spades.png');
                this.load.image('13', 'assets/PNGcards/5_of_clubs.png');
                this.load.image('14', 'assets/PNGcards/5_of_diamonds.png');
                this.load.image('15', 'assets/PNGcards/5_of_hearts.png');
                this.load.image('16', 'assets/PNGcards/5_of_spades.png');
                this.load.image('17', 'assets/PNGcards/6_of_clubs.png');
                this.load.image('18', 'assets/PNGcards/6_of_diamonds.png');
                this.load.image('19', 'assets/PNGcards/6_of_hearts.png');
                this.load.image('20', 'assets/PNGcards/6_of_spades.png');
                this.load.image('21', 'assets/PNGcards/7_of_clubs.png');
                this.load.image('22', 'assets/PNGcards/7_of_diamonds.png');
                this.load.image('23', 'assets/PNGcards/7_of_hearts.png');
                this.load.image('24', 'assets/PNGcards/7_of_spades.png');
                this.load.image('25', 'assets/PNGcards/8_of_clubs.png');
                this.load.image('26', 'assets/PNGcards/8_of_diamonds.png');
                this.load.image('27', 'assets/PNGcards/8_of_hearts.png');
                this.load.image('28', 'assets/PNGcards/8_of_spades.png');
                this.load.image('29', 'assets/PNGcards/9_of_clubs.png');
                this.load.image('30', 'assets/PNGcards/9_of_diamonds.png');
                this.load.image('31', 'assets/PNGcards/9_of_hearts.png');
                this.load.image('32', 'assets/PNGcards/9_of_spades.png');
                this.load.image('33', 'assets/PNGcards/10_of_clubs.png');
                this.load.image('34', 'assets/PNGcards/10_of_diamonds.png');
                this.load.image('35', 'assets/PNGcards/10_of_hearts.png');
                this.load.image('36', 'assets/PNGcards/10_of_spades.png');
                this.load.image('37', 'assets/PNGcards/ace_of_clubs.png');
                this.load.image('38', 'assets/PNGcards/ace_of_diamonds.png');
                this.load.image('39', 'assets/PNGcards/ace_of_hearts.png');
                this.load.image('40', 'assets/PNGcards/ace_of_spades2.png');
                this.load.image('41', 'assets/PNGcards/jack_of_clubs2.png');
                this.load.image('42', 'assets/PNGcards/jack_of_diamonds2.png');
                this.load.image('43', 'assets/PNGcards/jack_of_hearts2.png');
                this.load.image('44', 'assets/PNGcards/jack_of_spades2.png');
                this.load.image('45', 'assets/PNGcards/king_of_clubs2.png');
                this.load.image('46', 'assets/PNGcards/king_of_diamonds2.png');
                this.load.image('47', 'assets/PNGcards/king_of_hearts2.png');
                this.load.image('48', 'assets/PNGcards/king_of_spades2.png');
                this.load.image('49', 'assets/PNGcards/queen_of_clubs2.png');
                this.load.image('50', 'assets/PNGcards/queen_of_diamonds2.png');
                this.load.image('51', 'assets/PNGcards/queen_of_hearts2.png');
                this.load.image('52', 'assets/PNGcards/queen_of_spades2.png');
                this.load.image('hit', 'assets/Screenshot_1.png');
                this.load.image('dt', 'assets/Screenshot_2.png');
                this.load.image('done', 'assets/Screenshot_3.png');
                this.load.image('back', 'assets/back.png');
                this.load.image('rt', 'assets/retrybuttom.png');
            }
            
            function create(){
                this.add.image(400, 300, 'fundo2')

                function cardValue(num) {
                    var cardV = 0; 
                    var aux = 0; 
                    var t = 1; 
                    
                    if(num < 37){
                        do{
                            if((num/4) <= t){
                                cardV = t+1;
                                aux = 1; 
                            }else{
                                t++;
                            }

                        }while(aux == 0);
                    
                    
                    }else if(num < 41){
                        if((21 - maoValue) < 11){
                            cardV = 1; 
                        }else{
                            cardV = 11;        
                        }

                    }else{
                        cardV = 10; 

                    }
                
                    return cardV

                }

                
                function botcardvalue(num){
                    var cardV = 0; 
                    var aux = 0; 
                    var t = 1; 
                    
                    if(num < 37){
                        do{
                            if((num/4) <= t){
                                cardV = t+1;
                                aux = 1; 
                            }else{
                                t++;
                            }

                        }while(aux == 0);
                    
                    
                    }else if(num < 41){
                        if((21 - bothandvalue) < 11){
                            cardV = 1; 
                        }else{
                            cardV = 11;        
                        }

                    }else{
                        cardV = 10; 

                    }
                
                    return cardV





                }

                var ulosttext = this.add.text(16, 16, 'u lost !!', { fontSize: '32px', fill: '#000' }).setScale(0.0);
                var bothandtext = this.add.text(0, 0, 'bot hand : ', { fontSize: '32px', fill: '#000' }).setScale(0.0);
                var moneyText = this.add.text(16, 16, 'coins: 20', { fontSize: '32px', fill: '#000' });
                var betText = this.add.text(400, 16, 'bet: 20', { fontSize: '32px', fill: '#000' });
                acontecimentoText = this.add.text(300, 300, 'ay', { fontSize: '32px', fill: '#000' }).setScale(0.0);

                hitb = this.add.image(game.config.width/2, game.config.height/2 + 250, 'hit'); 
                hitb.setInteractive();
                hitb.setScale(0.0);
                hitb.setVisible(true);


                var betButton = this.add.image(game.config.width/4, game.config.height/2 + 250, 'bet');
                betButton.setInteractive(); 
                betButton.setScale(0.5);
                betButton.setVisible(true);  
              
                var retrybt = this.add.image(game.config.width/4, game.config.height/2 + 250, 'rt');
                retrybt.setInteractive(); 
                retrybt.setScale(0.0);
                retrybt.setVisible(true);

                var back = this.add.image(game.config.width/2 +250, game.config.height/2 - 200, 'back');
                back.setInteractive(); 
                back.setScale(0.0);
                back.setVisible(true);



                var dxButton = this.add.image(game.config.width/2, game.config.height/2 + 250, 'bx');
                dxButton.setInteractive();
                dxButton.setScale(0.5);
                dxButton.setVisible(true);

                done = this.add.image(game.config.width/2 + 250, game.config.height/2 + 250, 'done'); 
                done.setInteractive();
                done.setScale(0.0);
                done.setVisible(true);


                
                var dtButton = this.add.image(game.config.width/1.2, game.config.height/2 + 250, 'dt');
                dtButton.setInteractive();
                dtButton.setScale(0.5);
                dtButton.setVisible(true);

                dxButton.on('pointerdown', function () {
 
                    if(((aposta*2) > coin ) || coin <= 0){

                            //nao deixa apostar mas do que tem 
                            console.log("u cant bet dat")
                    }else{  
                        aposta = aposta*2; 

                    }
                    betText.setText('bet: ' + aposta);
       
                }, this);

                dtButton.on('pointerdown', function () {

                    if(aposta == 5){
                        console.log("u cant get lower dan 5");
                    }else{
                        aposta = aposta/2; 

                    }
                    
                    betText.setText('bet: ' + aposta);
                
                }, this);
                
                betButton.on('pointerdown', function (){

                    var j = 1; 
                    for (let i = 1; i <= 52; i++) {
                    
                        var cal = (4*j) - i; 
                        var text = "";
                        var result = "";
                        // código a ser executado em cada iteração (faz o deck)
                        if(i < 37){
                        
                            text = (j+1).toString(); 
 
                            if(cal == 3){
                                result = text.concat("_of_clubs.png");

                            }else if(cal == 2){
                                result = text.concat("_of_diamonds.png");
                        
                            }else if(cal == 1){
                                result = text.concat("_of_hearts.png");
                        
                            }else if(cal == 0){
                                result = text.concat("_of_spades.png");

                            }
                        
                            deck[i] = result;


                        }else{
                        
                            if(i < 41){
                            
                                text = "ace"; 
                            
                                if(cal == 3){
                                    result = text.concat("_of_clubs.png");

                                }else if(cal == 2){
                                    result = text.concat("_of_diamonds.png");
                        
                                }else if(cal == 1){
                                    result = text.concat("_of_hearts.png");
                        
                                }else if(cal == 0){
                                    result = text.concat("_of_spades2.png");

                                }
                            
                                deck[i] = result;
                        
                        
                            }else if(i < 45){
                                text = "jack"; 
                        
                                if(cal == 3){
                                    result = text.concat("_of_clubs2.png");

                                }else if(cal == 2){
                                    result = text.concat("_of_diamonds2.png");
                            
                                }else if(cal == 1){
                                    result = text.concat("_of_hearts2.png");
                            
                                }else if(cal == 0){
                                    result = text.concat("_of_spades2.png");

                                }
                                
                                deck[i] = result;

                            }else if(i < 49){
                                text = "king"; 
                            
                                if(cal == 3){
                                    result = text.concat("_of_clubs2.png");

                                }else if(cal == 2){
                                    result = text.concat("_of_diamonds2.png");
                            
                                }else if(cal == 1){
                                    result = text.concat("_of_hearts2.png");
                            
                                }else if(cal == 0){
                                    result = text.concat("_of_spades2.png");

                                }
                                deck[i] = result;

                            }else if(i < 53){
                                text = "queen"; 
                                
                                if(cal == 3){
                                result = text.concat("_of_clubs2.png");

                                }else if(cal == 2){
                                    result = text.concat("_of_diamonds2.png");
                            
                                }else if(cal == 1){
                                    result = text.concat("_of_hearts2.png");
                            
                                }else if(cal == 0){
                                    result = text.concat("_of_spades2.png");

                                }
                                deck[i] = result;

                            }

                        }
                    
                        if(i == 4*j){
                           j++; 

                        }  

                    }
                
                    for(let i = 1; i <= 52; i++){
                    console.log("key = " + i + "; value = " + deck[i]);

                    }
                    for(let i = 0; i < 2; i++){
                    //console.log("random = " + (Math.floor(Math.random() * 51)+1))
                    
                        var aux = 0; 
                        result = (Math.floor(Math.random() * 51)+1);
                    
                        var temp = result;  

                        if(i > 0){
                            
                            do{
                                if(temp == result){
                                    result = (Math.floor(Math.random() * 51)+1);
                                }else{
                                    aux = 1; 
                                }
                            }while(aux == 0);
                            

                        }
                        
                        console.log("result3 = " + result);
                        
                        pick.push(result);
                        
                        
                    }
                    
                    for(let i = 0; i < pick.length; i++){
                        
                        maoValue = maoValue + cardValue(pick[i]);
                        let final = `${pick[i]}`;
                        console.log("array = " + pick[i] + " valor = " + cardValue(pick[i]) + " mao = " + maoValue + " image diretorio = " + final);
                    
       
                    }

                    cardImage1 = this.add.image(game.config.width/9, game.config.height/2 + 120, `${pick[0]}`);
                    cardImage1.setScale(0.3);
                    cardImage1.setVisible(true);  
                    cardImage2 = this.add.image(game.config.width/7, game.config.height/2 + 120, `${pick[1]}`);
                    cardImage2.setScale(0.3);
                    cardImage2.setVisible(true);

                    handvaluetext = this.add.text(10, 270, 'valor da mao: ' + maoValue, { fontSize: '32px', fill: '#000' });
                    valorApostTextIG = this.add.text(10, 550, 'bet: ' + aposta, { fontSize: '32px', fill: '#000' });

                    dtButton.setScale(0.0);
                    dxButton.setScale(0.0);
                    betButton.setScale(0.0);
                    moneyText.setScale(0.0);
                    betText.setScale(0.0);
                    hitb.setScale(0.5);
                    done.setScale(0.5);
                    acontecimentoText.setScale(0.0);

                }, this);

                hitb.on('pointerdown', function (){
                    if(maoValue < 21){
                        var aux = 0; 
                        var p = 0; 
                        
                    

                        do{
                        
                            result = (Math.floor(Math.random() * 51)+1);
                            p = 0; 
                            aux = 0; 
                            for(let i = 0; i < pick.length; i++){
                                if(result != pick && p == 0){
                                    aux = 1; 
                                }else{
                                    p = 1; 
                                }

                            }

                        }while(aux == 0); 
                    
                    
                    
                    
                        pick.push(result);
                        console.log("carta index = " + result); 
                    
                    
                    
                    
                        console.log("size pick = " + pick.length);
                    
                    
                        if(pick.length == 3){
                            ci3 = this.add.image(game.config.width/5.6, game.config.height/2 + 120, `${pick[pick.length - 1]}`);
                            ci3.setScale(0.3);
                            ci3.setVisible(true);  
                    
                        }else if(pick.length == 4){
                            ci4 = this.add.image(game.config.width/4.7, game.config.height/2 + 120, `${pick[pick.length - 1]}`);
                            ci4.setScale(0.3);
                            ci4.setVisible(true); 
                    
                        }else if(pick.length == 5){
                            ci5 = this.add.image(game.config.width/4, game.config.height/2 + 120, `${pick[pick.length - 1]}`);
                            ci5.setScale(0.3);
                            ci5.setVisible(true); 
                        }


                        maoValue = maoValue + cardValue(result); 
                        handvaluetext.setText('valor da mao: ' + maoValue);
                    }
                    
                     
                    if(maoValue > 20){
                        
                        
                        console.log('valor da mao: ' + maoValue);
                        console.log("tou neste ifdastfgagasdtrfgybhunjimko,l37377373737");
                        back.setScale(0.5);
                        if(maoValue > 21){
                            coin = coin - aposta;  
                            ulosttext.setScale(1.5);
                        }else if(maoValue == 21){
                            coin = coin + aposta;  
                            ulosttext.setText("u won").setScale(1.5);

                        }
                        
                        aposta = 20; 
                        ulosttext.setScale(1.5);
                        done.setScale(0.0);
                        hitb.setScale(0.0);
                        
                    
                        
                        maoValue = 0;
                    }

                    estado = 0
                    bothandvalue = 0; 
                    endgame = 0; 

                    tempsize = pick.length; 
                }, this);
                
                console.log("mao value = " + maoValue);
                
                
                retrybt.on('pointerdown', function (){
                    coin = 20
                    aposta = 20
                    dtButton.setScale(0.5);
                    dxButton.setScale(0.5);
                    betButton.setScale(0.5); 
                    moneyText.setText("coin = " + coin).setScale(1.5);  
                    retrybt.setScale(0.0);
                    acontecimentoText.setScale(0.0)
                    betText.setText("bet : 20")
                    betText.setScale(1.5);

                }, this);

                back.on('pointerdown', function (){
                        
                    
                        acontecimentoText.setScale(0.0)
                        valorApostTextIG.setScale(0.0);
                        done.setScale(0.0);
                        hitb.setScale(0.0);
                        dtButton.setScale(0.5);
                        dxButton.setScale(0.5);
                        if(coin <= 0){
                            betButton.setScale(0.0)
                        }else{
                            betButton.setScale(0.5);  
                            acontecimentoText.setText("again ?").setScale(1.5)
                        }
                                           
                        moneyText.setText("coin = " + coin).setScale(1.5);        
                        
                        handvaluetext.setScale(0.0)
                        betText.setScale(1.5);
                        
                        
                        cardImage1.setScale(0.0);
                        cardImage2.setScale(0.0); 
                        
                        
                        
                        
                        if(tempsize == 3){
                            ci3.setScale(0.0);
                        }else if(tempsize == 4){
                            ci3.setScale(0.0);
                            ci4.setScale(0.0);
                        }else if(tempsize == 5){
                            ci3.setScale(0.0);
                            ci4.setScale(0.0);
                            ci5.setScale(0.0);
                        }
                        if(evento == 1){

                            
                            cardImage3.setScale(0.0);
                            cardImage4.setScale(0.0);
                            if(c == 3){
                                ci7.setScale(0.0);
                            }else if(c == 4){
                                ci7.setScale(0.0);
                                ci8.setScale(0.0);
                            }else if(c == 5){
                                ci7.setScale(0.0);
                                ci8.setScale(0.0);
                                ci9.setScale(0.0);

                            }
                            bothandvalue = 0
                            

                        }
                        
                        ulosttext.setScale(0.0)
                        bothandtext.setScale(0.0)
                        if(coin <= 0){
                            acontecimentoText.setText("u cant bet more.").setScale(1.5);
                            betText.setScale(0.0);
                            dtButton.setScale(0.0);
                            dxButton.setScale(0.0);
                            retrybt.setScale(0.5)

                        }

                        evento = 0

                        pick.splice(0,pick.length);
                        console.log("pick size dentro do if = " + pick.length);
                        maoValue = 0;
                        
                        back.setScale(0.0)






                }, this);
            


                done.on('pointerdown', function (){
                    //bot
                    
                    var aux = 0;
                    var p = 0; 
                    c = 0

                    do{
                        aux = 0; 
                    
                        
                        do{
                            p = 0; 
                            result = (Math.floor(Math.random() * 51)+1);  
                            for(let j = 0; j < pick.length; j++){
                                if(pick[j] != result && p == 0){
                                    aux = 1; 
                                    console.log("a"); 
                                    
                                     
                                }else{
                                    p = 1; 
                                    aux = 0; 
                                    console.log("b"); 
                                }


                            }
                            console.log("c");


                        }while(aux == 0); 

                        if(aux == 1){
                            c++;
                        }

                        pick.push(result);
                        bothandvalue = bothandvalue + botcardvalue(result);
                        console.log("bot hand value =) " + bothandvalue); 
                        console.log("c = " + c);
                        if(c == 1){
                            cardImage3 = this.add.image(game.config.width/9, game.config.height/2 - 150, `${pick[pick.length-1]}`);
                            cardImage3.setScale(0.3);
                            cardImage3.setVisible(true);  


                        }else if(c == 2){
                            cardImage4 = this.add.image(game.config.width/7, game.config.height/2 - 150, `${pick[pick.length-1]}`);
                            cardImage4.setScale(0.3);
                            cardImage4.setVisible(true); 

                        }else if(c == 3){
                            ci7 = this.add.image(game.config.width/5.6, game.config.height/2 - 150, `${pick[pick.length - 1]}`);
                            ci7.setScale(0.3);
                            ci7.setVisible(true);


                        }else if(c == 4){
                            ci8 = this.add.image(game.config.width/4.7, game.config.height/2 - 150, `${pick[pick.length - 1]}`);
                            ci8.setScale(0.3);
                            ci8.setVisible(true);


                        }else if(c == 5){
                            ci9 = this.add.image(game.config.width/4, game.config.height/2 - 150, `${pick[pick.length - 1]}`);
                            ci9.setScale(0.3);
                            ci9.setVisible(true);
                        }

                        
                        

                    }while ((bothandvalue < 21) && (bothandvalue < maoValue));

                    console.log("cheguei aqui");

                    evento = 1;
                    bothandtext.setText("bot hand : " + bothandvalue); 
                    bothandtext.setScale(1.0)

                    if(bothandvalue > 21){
                        acontecimentoText.setText("u won!").setScale(1.5);
                        coin = coin + aposta; 
                        endgame = 1; 
                        console.log("1111");
                        estado = 1
                    }else if((bothandvalue <= 21) && (bothandvalue > maoValue)){
                        acontecimentoText.setText("u lost!").setScale(1.5);
                        coin = coin - aposta; 
                        endgame = 1; 
                        console.log("2222");
                        estado = 2
                    }else if((bothandvalue <= 21) && (bothandvalue < maoValue)){
                        acontecimentoText.setText("u won!").setScale(1.5);
                        coin = coin + aposta; 
                        endgame = 1; 
                        console.log("3333");
                        estado = 1
                    }else if(maoValue == bothand){
                        acontecimentoText.setText(" tie!").setScale(1.5);
                        coin = coin
                        endgame = 1; 
                        console.log("4444");
                        estado = 3
                    }


                    
                    

                    
                    if(endgame == 1){
                        
                        console.log('valor da mao: ' + maoValue);
                        console.log("tou neste if")
                        
                         
                        if(estado == 1){
                            coin = coin + aposta; 
                        }else if(estado == 2){
                            coin = coin - aposta; 
                        }else if(estado == 3){
                            coin = coin

                        }
                        
                        aposta = 20; 
                        back.setScale(0.5)
                        
                    }



                }, this);














            }




















        </script>
    </body>
</html>